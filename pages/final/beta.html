<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">
		<link href="https://fonts.googleapis.com/css?family=Roboto+Mono%7CArvo:400%7CRoboto:300,400,500,700%7CCookie" rel="stylesheet">
		<link rel="stylesheet" href="../../ui/vendor/css/fontawesome.min.css">
		<link rel="stylesheet" href="../../ui/vendor/perfect-scrollbar.css">
		<link rel="stylesheet" href="../../ui/css/style.css">
		<script src="../../ui/vendor/d3.v5.min.js"></script>
		<title>CS360/560 Data Visualization</title>
	<style>
		.map-container {
			background-color: rgba(0,150,200,0.1);
			font-size: 0;
		}
		#tooltip {
		  font-weight: 600;
		  text-shadow: 0px 0px 2px white;
		  fill: black;
		  stroke: none;
		}
		.neighborhood-tooltip {
			min-width: 100px;
			background-color: #fff;
			border-radius: 3px;
			box-shadow: rgba(0,0,0,0.2);
			padding: 10px;
			font-size: 13px;
			text-align: center;
		}

		#map path.land {
		  stroke: none;
		}

		#map path.neighborhood {
		  fill: none;
		  stroke: white;
		  stroke-width: 3.5px;
		  pointer-events: none;
		}

		#map path.street {
  		  fill: none;
		  stroke: white;
		  stroke-width: 1px;
		  pointer-events: none;
		}

		#map .active {
		  stroke: #0099ff !important;
		}

		#map circle.symbol {
		  fill-opacity: 0.6;

		  stroke: white;
		}
		#map circle.active {
		  fill: #0099ff;
		  fill-opacity: 0.8;
		  stroke: #000 !important;
		}
		#map a:link, #map a:visited {
		  color: #444444;
		}

		#map a:hover, #map a:active {
		  color: red;
		}
		.info-table {
			background-color: rgba(0, 255, 255, 0.5);
			width: 400px;
			color: #000;
		}
		.info-table th {
			white-space: nowrap;
		}
		.info-table tr {
			vertical-align: top;
		}
		.legend-title {
			font-size: 16px;
		}
		.legend-label {
			font-size: 12px;
		}
	</style>
	</head>
	<body>
		<div class="full-page">
			<div class="sidebar-container">
				<aside  class="sidebar sidebar-left sidebar-fixed sidebar-dark">
					<div class="scroll">
						<div class="sidebar-header text-white bg-info">
							<div class="sidebar-brand d-flex justify-content-between align-items-center">
								<div class="title text-truncate">
									Data Visulization
								</div>
								<div class="logo align-items-center justify-content-around">
									<i class="material-icons">all_inclusive</i>
								</div>
							</div>
						</div>
						<div class="sidebar-nav-container">
							<ul class="list-nav sidebar-nav list-nav-dark list-nav-dark-info">
								<li class="list-nav-group-title">
									<span>
									  FINAL PROJECT
									</span>
								</li>
								<li class="list-nav-item">
									<a href="../../" class="list-nav-link">
									  <span class="list-nav-icon">
										<i class="material-icons">home</i>
									  </span>
									  <span class="list-nav-label">Home</span>
									</a>
								</li>
								<li class="list-nav-item">
									<a href="#" class="list-nav-link">
									  	<span class="list-nav-icon">
											<i class="material-icons">folder_open</i>
									  	</span>
									  	<span class="list-nav-label">Homework 1</span>
									  	<span class="list-nav-expand">
											<i class="material-icons">add</i>
									  	</span>
									</a>
									<ul class="list-nav-child">
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework1/overview.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Overview</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework1/prototypes.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Tableau Prototypes</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework1/d3-bar.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">D3 Implementations</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework1/requirements.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Requirements</span>
										  </a>
										</li>
									</ul>
								</li>
								<li class="list-nav-item">
									<a href="#" class="list-nav-link">
									  	<span class="list-nav-icon">
											<i class="material-icons">folder_open</i>
									  	</span>
									  	<span class="list-nav-label">Homework 2</span>
									  	<span class="list-nav-expand">
											<i class="material-icons">add</i>
									  	</span>
									</a>
									<ul class="list-nav-child">
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework2/overview.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Overview</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework2/scatterplot-matrix.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Scatterplot Matrix</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework2/requirements.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Requirements</span>
										  </a>
										</li>
									</ul>
								</li>
								<li class="list-nav-item">
									<a href="#" class="list-nav-link">
									  	<span class="list-nav-icon">
											<i class="material-icons">folder_open</i>
									  	</span>
									  	<span class="list-nav-label">Homework 3</span>
									  	<span class="list-nav-expand">
											<i class="material-icons">add</i>
									  	</span>
									</a>
									<ul class="list-nav-child">
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework3/overview.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Overview</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework3/implementation.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Implementations</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework3/requirements.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Requirements</span>
										  </a>
										</li>
									</ul>
								</li>
								<li class="list-nav-item">
									<a href="#" class="list-nav-link">
									  	<span class="list-nav-icon">
											<i class="material-icons">folder_open</i>
									  	</span>
									  	<span class="list-nav-label">Homework 4</span>
									  	<span class="list-nav-expand">
											<i class="material-icons">add</i>
									  	</span>
									</a>
									<ul class="list-nav-child">
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework4/overview.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Overview</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework4/implementation.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Implementations</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../homework4/requirements.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Requirements</span>
										  </a>
										</li>
									</ul>
								</li>
								<li class="list-nav-item">
									<a href="#" class="list-nav-link">
									  	<span class="list-nav-icon">
											<i class="material-icons">folder_open</i>
									  	</span>
									  	<span class="list-nav-label">Midterm</span>
									  	<span class="list-nav-expand">
											<i class="material-icons">add</i>
									  	</span>
									</a>
									<ul class="list-nav-child">
										<li class="list-nav-item list-nav-child-item">
										  <a href="../midterm/prototype.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Prototype</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="../midterm/implementation.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Implementation</span>
										  </a>
										</li>
									</ul>
								</li>
								<li class="list-nav-item">
									<a href="#" class="list-nav-link">
									  	<span class="list-nav-icon">
											<i class="material-icons">folder_open</i>
									  	</span>
									  	<span class="list-nav-label">Final</span>
									  	<span class="list-nav-expand">
											<i class="material-icons">add</i>
									  	</span>
									</a>
									<ul class="list-nav-child">
										<li class="list-nav-item list-nav-child-item">
										  <a href="overview.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Overview</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="about.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">About</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="dataset.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Dataset</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="alpha.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Alpha Release</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="beta.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Beta Release</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="final.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Final Release</span>
										  </a>
										</li>
										<li class="list-nav-item list-nav-child-item">
										  <a href="requirements.html" class="list-nav-link">
											<span class="list-nav-icon list-nav-icon-sm">
											  <i class="material-icons">keyboard_arrow_right</i>
											</span>
											<span class="list-nav-label">Requirements</span>
										  </a>
										</li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</aside>
			</div>
			<div class="page">
				<div class="topbar-container">
					<nav class="navbar bg-white text-secondary navbar-expand-sm py-0 topbar fixed">
						<button class="btn btn-flat-secondary btn-sm btn-icon mr-1 no-shadow d-none d-xl-block sidebar-toggle">
							<i class="material-icons">menu</i>
						</button>
						<button class="btn btn-flat-secondary btn-sm btn-icon mr-1 d-xl-none no-shadow sidebar-hide">
							<i class="material-icons">menu</i>
						</button>

						<div class="navbar-text ml-3 d-none d-sm-block">
							<h5 class="m-0 text-dark">Final Project Beta Release</h5>
						</div>

						<div class="ml-auto d-sm-flex ml-3">
							<ul class="navbar-nav">
								<li class="nav-item no-caret">
									<a href="../about.html" class="nav-link text-center">About</a>
								</li>
								<li class="nav-item no-caret">
									<a href="../resources.html" class="nav-link text-center">Resources</a>
								</li>
								<li class="nav-item no-caret">
									<a href="https://jakezhong.com" target="_blank" class="nav-link text-center">
										<i class="far fa-globe"></i>
									</a>
								</li>
								<li class="nav-item no-caret">
									<a href="https://github.com/jakezhong" target="_blank" class="nav-link text-center">
										<i class="fab fa-github"></i>
									</a>
								</li>
								<li class="nav-item no-caret">
									<a href="https://www.linkedin.com/in/jake-zhong/" target="_blank" class="nav-link text-center">
										<i class="fab fa-linkedin-in"></i>
									</a>
								</li>
								<li class="nav-item no-caret">
									<a href="https://www.instagram.com/jakezhong_" target="_blank" class="nav-link text-center">
										<i class="fab fa-instagram"></i>
									</a>
								</li>
								<li class="nav-item no-caret">
									<a href="https://www.facebook.com/jksakura" target="_blank" class="nav-link text-center">
										<i class="fab fa-facebook"></i>
									</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
				<div class="page-content">
					<section class="section">
						<div class="container">
						  	<!-- Begin page content -->
						  	<div class="content">
								<h2 class="section-title">Question</h2>
								<h4>Home Price</h4>
								<ul>
									<h5>What cities in the bay area have the highest home price in Jan 2020?</h5>
									<li>What is the trend of the home price of the bay area in the last 5 years?</li>
								</ul>
								<h4>Count of Home Sales</h4>
								<ul>
									<li>What is the count of home sales of all cities in the bay area?</li>
									<li>What is the trend of the count of home sales of the bay area in the last 5 years?</li>
								</ul>
								<hr class="space">
								<h2 class="section-title">Answer</h2>
								<h4>Home Price</h4>
								<ul>
									<li>According to the map, the south part of the bay area has a higher home price, following by the central part, while the north bay area has a lower home price.</li>
									<li>According to the line chart, the average home price in the bay area kept growing and peaked at Jun 2018, but it started to drop in the following years.</li>
								</ul>
								<h4>Count of Home Sales</h4>
								<p>No answer at the moment yet.</p>
								<hr class="space">
								<h2 class="section-title">Prototype 1</h2>
								<h3 class="section-title top-space">Bar Chart: Average Price of Feb 2020 for each Region Name. The view is filtered on Region Name, which keeps 43 of 63 members.</h3>
								<h4 class="section-title top-space">Encoding</h4>
								<ul>
									<li>X-Axis: Average home price in the month of Jan 2020</li>
									<li>Y-Axis: City names in the bay area</li>
								</ul>
								<h4 class="section-title top-space">Interactivity</h4>
								<div class="row">
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">Tooltip & Highlight</h5>
										<img src="../../assets/img/final/beta/beta-bar-interactivity1.gif" alt="Bar Interactivity">
									</div>
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">Sorting</h5>
										<img src="../../assets/img/final/beta/beta-bar-interactivity2.gif" alt="Bar Interactivity">
									</div>
								</div>
								<h4 class="section-title top-space">Prototype</h4>
								<div class="card work-images">
									<div class="card-body card-body-p">
									  	<div class="chart-container">
											<figure>
												<img src="../../assets/img/final/beta/bar-chart.png" alt="passenger-count-activity-period">
											</figure>
										</div>
									</div>
								</div>
								<h2 class="section-title">Prototype 2</h2>
								<h3 class="section-title top-space">Line Chart: Average Price of from Jan 2014 to Jan 2020 by each Half Year for the Whole Bay Area.</h3>
								<h4 class="section-title top-space">Encoding</h4>
								<ul>
									<li>X-Axis: Time period of each half year from Jan 2014 to Jan 2020</li>
									<li>Y-Axis: The average home price of the whole bay area</li>

								</ul>
								<h4 class="section-title top-space">Interactivity</h4>
								<div class="row">
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">Tooltip</h5>
										<img src="../../assets/img/final/beta/beta-line-interactivity1.gif" alt="Bar Interactivity">
									</div>
								</div>
								<h4 class="section-title top-space">Prototype</h4>
								<div class="card work-images">
									<div class="card-body card-body-p">
									  	<div class="chart-container">
											<figure>
												<img src="../../assets/img/final/beta/line-chart.png" alt="passenger-count-activity-period">
											</figure>
									  	</div>
									</div>
								</div>
								<h2 class="section-title">Prototype 3</h2>
								<h3 class="section-title top-space">Map: Map based on Longitude (generated) and Latitude (generated).  Color shows average of 2020-01.  Size shows average of 2020-01.  Details are shown for Region Name.</h3>
								<h4 class="section-title top-space">Encoding</h4>
								<ul>
									<li>Circle: Major cities in the bay area showed in the dataset</li>
									<li>Color: Average home price in Jan 2020</li>
									<li>Size: Currently also the average home price in Jan 2020, but will change to count of home sales in Jan 2020 in the implementation</li
								</ul>
								<h4 class="section-title top-space">Interactivity</h4>
								<div class="row">
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">Tooltip</h5>
										<img src="../../assets/img/final/beta/beta-map-interactivity1.gif" alt="Bar Interactivity">
									</div>
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">Zooming</h5>
										<img src="../../assets/img/final/beta/beta-map-interactivity2.gif" alt="Bar Interactivity">
									</div>
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">Dragging</h5>
										<img src="../../assets/img/final/beta/beta-map-interactivity3.gif" alt="Bar Interactivity">
									</div>
									<div class="col-lg-6 col-12">
										<h5 class="section-title top-space">(Maybe) Filter</h5>
									</div>
								</div>
								<h4 class="section-title top-space">Prototype</h4>
								<div class="card work-images">
									<div class="card-body card-body-p">
									  	<div class="chart-container">
											<figure>
												<img src="../../assets/img/final/beta/map.png" alt="passenger-count-activity-period">
											</figure>
									  	</div>
									</div>
								</div>
					  		</div>
						  <!-- End page content -->
						</div>
					</section>
				
					<section class="feedback">
						<div class="container">
							<hr class="space"/>
							<h2 class="section-title">Feedback from Classmates</h2>
							<div class="card">
								<div class="post-container">
									<div class="comments">
										<div class="comment" style="border-top: 1px solid #eee;">
											<div class="media align-items-top px-4 py-3">
												<div class="post media-body ml-3 py-1">
													<div class="title" >
														<h6 class="mt-0 mb-0">Instructor</h6>
													</div>
													<div class="post py-2 text-secondary" style="max-width: 80%">
														<ul>
															<li>
																<p>Alpha Release</p>
																<ul>
																	<li>
																		<p>The dataset is a great choice, but it may need some work to wrangle the data for this project. Because the original data in Zillow doesn't have a sequential time period and geographic information for cities.</p>
																	</li>
																	<li>
																		<p>For the final project, we are expecting a multi-components visualization, only a bar chart may not meet this requirement and not enough to get a good grade.</p>
																	</li>
																</ul>
															</li>
															<li>
																<p>Beta Release</p>
																<ul>
																	<li>
																		<p>A proportion map is a great choice for this topic, and the color for price and size for count make sense here.</p>
																	</li>
																	<li>
																		<p>In the map prototype, there’s no way we can see the trend of price and count, it would be great if you can connect the line chart with the map. </p>
																	</li>
																	<li>
																		<p>You can try to implement interactivity to the map or line chart, for example, it will be really cool if you can display the line chart when users hover on the map.</p>
																	</li>
																</ul>
															</li>
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="comment" style="border-top: 1px solid #eee;">
											<div class="media align-items-top px-4 py-3">
												<div class="post media-body ml-3 py-1">
													<div class="title" >
														<h6 class="mt-0 mb-0">Alex Wang</h6>
													</div>
													<div class="post py-2 text-secondary" style="max-width: 80%">
														<ul>
															<li><p>Visual Encodings</p>
																<p>On the symbol map visualization the size and color for major cities seems clear for readers to know immediately about the average house price</p>
															</li>
															<li><p>Non-Color Encodings</p>
																<p>The average house price is used as quantitative variable, and it seems fine if the author wants to explore how does the price behave in different perspectives such as by time, by geographic or the ranking.</p>
															</li>
															<li><p>Color Encodings</p>
																<p>It is nice that the red color is consistent among all the prototypes, but since on the map visualization, the extent of "how red it is" represents a data value, maybe in other graphs could use other colors?</p>
															</li>
															<li><p>Context</p>
																<p>The context like tick labels and legends are really clear.</p>
															</li>
															<li><p>Lie Factor</p>
																<p>No lie factor.</p>
															</li>
															<li><p>Data Ink Ratio</p>
																<p>High data ink ratio.</p>
															</li>
															<li><p>Data Density</p>
																<p>High data density.</p>
															</li>
															<li><p>Gestalt Principles</p>
																<p>Gestalt principles used well.</p>
															</li>
															<li><p>Planned Interactivity</p>
																<p>The on-demand detail tooltip makes it clear for readers.</p>
															</li>
															<li><p>Planned Interaction Effectiveness</p>
																<p>Very Good.</p>
															</li>
															<li><p>Design and Aesthetics</p>
																<p>Very Good.</p>
															</li>
															<li><p>Understanding</p>
																<p>From the map visualization it seems that cities with relatively higher average house prices are closer to each other.</p>
															</li>
															<li><p>Visualization Goal</p>
																<p>Very Good.</p>
															</li>
															<li><p>Visualization Effectiveness</p>
																<p>Very Good.</p>
															</li>
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="comment" style="border-top: 1px solid #eee;">
											<div class="media align-items-top px-4 py-3">
												<div class="post media-body ml-3 py-1">
													<div class="title" >
														<h6 class="mt-0 mb-0">Enrique Bascur</h6>
													</div>
													<div class="post py-2 text-secondary" style="max-width: 80%">
														<ul>
															<li><p>Visual Encodings</p>
																<p>prototype 1:</p>
																<p>X-Axis: Average house price in the month of Jan 2020</p>
																<p>Y-Axis: City names in the bay area</p>
																<p>prototype2:</p>
																<p>X-Axis: Time period of each half year from Jan 2014 to Jan 2020</p>
																<p>Y-Axis: The average house price of the whole bay area</p>
																<p>prototype3:</p>
																<p>Circle: Major cities in the bay area showed in the dataset</p>
																<p>Color: Average house price in Jan 2020</p>
																<p>Size: Currently also the average house price in Jan 2020, but will change to count of house sales in Jan 2020 in the implementation</p>
															</li>
															<li><p>Non-Color Encodings</p>
																<p>Everything looks good and organized, the only slight problem I saw was that in the first prototype the x-axis count should turn to millions at the end. 2600k seems a bit awkward.</p>
															</li>
															<li><p>Color Encodings</p>
																<p>There's no excessive or unnecessary use of color</p>
															</li>
															<li><p>Context</p>
																<p>It would be good if the title said 'average price of homes' but outside of that everything is easily understadable</p>
															</li>
															<li><p>Lie Factor</p>
																<p>In general very good data.</p>
																<p>The number scale on prototype 1 could be misleading, it's technically correct but could be better labeled.</p>
																<p>The only other issue I have is what is considered the bay area. For example Vacaville is halfway to Sacramento from San Francisco.</p>
															</li>
															<li><p>Data Ink Ratio</p>
																<p>For prototype 1 the data ink ratio is good. The bars fill in where they need to.</p>
																<p>For prototype 2 it's fairly low. there is a single line on a mostly white chart.</p>
															</li>
															<li><p>Data Density</p>
																<p>The data density is similar to the data ink ratio.</p>
															</li>
															<li><p>Gestalt Principles</p>
																<p>Very good for prototype 1</p>
																<p>Prototype 2 the line gets lost in all the white space.</p>
															</li>
															<li><p>Planned Interactivity</p>
																<p>Prototype 1 has sorting for the bar chart</p>
																<p>Prototype 2 has acircle on click that shows information on demando</p>
																<p>Prototype 3 has zooming and a tooltip</p>
															</li>
															<li><p>Planned Interaction Effectiveness</p>
																<p>It gives all the information needed.</p>
															</li>
															<li><p>Design and Aesthetics</p>
																<p>The bar chart is good, lots of color and fills up the chart, easily readable.</p>
																<p>The line chart could be better it seems a little too uncolorful. Maybe the gridline could e darker.</p>
															</li>
															<li><p>Understanding</p>
																<p>Good visualizations easy to understand.</p>
															</li>
															<li><p>Visualization Goal</p>
																<p>I can see the average cost per region for a home. Goal achieved.</p>
															</li>
															<li><p>Visualization Effectiveness</p>
																<p>It achieves what you want.</p>
															</li>
														</ul>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</section>
						
					<section>
						<div class="container">
							<hr class="space"/>
							<h2 class="section-title">Adjustments Based on Feedback</h2>
							<ul>
								<li>
									<p>Color</p>
									<p>I think I already did a good job on the color, so I don't want to change the whole thing here. But I see that the bar is not so interesting with only one color, so I adjusted the bar's color to match the legend as well, which also means the count of home sales.</p>
								</li>
								<li>
									<p>Title</p>
									<p>I definitely agree that using “home” makes more sense than “house”, so I change the noun of the title with “home” over “house”.</p>
								</li>
								<li>
									<p>Line Chart Space</p>
									<p>I also noticed the problem that the line chart has too much white space on the bottom since it’s a line chart, we don’t necessarily need to start from 0, so in the final, I replace the 0 with the minimum to reduce the unused white space.</p>
								</li>
								<li>
									<p>Implementation</p>
									<p>A very important one, putting three separate graphs here seems very unnecessary and loose. Thanks to my professor’s advice, I changed my mind and implemented all three different types of graphs into one BIG graph, with the map as the main body and the rest as a sidebar. I also added some interactivities to make them connected, this is the biggest progress and now things work consistently.</p>
								</li>
								<li>
									<p>Interactivity</p>
									<p>I also agree that the map doesn’t provide information for the trend and the trend is a very important element that people want to see, especially in my major visualization. So the way that I figured out was also using a sidebar for the line chart, so people can see the map and the trend at the same time. In case to not squeeze with the bar, which takes a lot of space, I added a dropdown that allows users to choose which visualization to show.</p>
									<p>Last but not least, I really love the idea that to interact with the map to show a trend or number about the specific city, so I added clicking interactivity on the circle, which will display a more detailed panel on the sidebar with almost all information I want for that clicked city.</p>
								</li>
							</ul>
						</div>
					</section>
				</div>
			</div>
		</div>
		<script>
			const urls = {
				basemap: "https://data.sfgov.org/resource/6ia5-2f8k.geojson",
				streets: "https://data.sfgov.org/resource/3psu-pn9h.geojson?$limit=2000",
				cases: "https://data.sfgov.org/resource/vw6y-z8j6.json"
//				cases: "https://data.sfgov.org/resource/nwbb-fxkq.json"
//				arrests: "https://data.sfgov.org/resource/nwbb-fxkq.json"
			};
			
			// calculate date range
			const end = d3.timeDay.floor(d3.timeDay.offset(new Date(), -1));
			const start = d3.timeDay.floor(d3.timeDay.offset(end, -7));
			const format = d3.timeFormat("%Y-%m-%dT%H:%M:%S");
			console.log(format(start), format(end));

			// add parameters to arrests url
//			urls.cases += "?$where=starts_with(resolution, 'Cite or Arrest')";
//			urls.cases += " AND incident_date between '" + format(start) + "'";
//			urls.cases += " and '" + format(end) + "'";
//			urls.cases += " AND point IS NOT NULL";
//			console.log(urls.cases);

			urls.cases += "?$where=starts_with(service_name, 'Parking Enforcement')";
			urls.cases += " AND requested_datetime between '2020-02-01T00:00:00'";
			urls.cases += " and '2020-02-29T23:59:59'";
			urls.cases += " AND point IS NOT NULL";
			console.log(urls.cases);
			// output url before encoding
			
			// encode special characters
			// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI
			urls.cases = encodeURI(urls.cases);
			console.log(urls.cases);

			const svg = d3
				.select(".map-container")
				.select("svg#map")
			  	.attr("x", 0);
			
			let width = 960;
			
			let height = 500;
			
			let neighborhoods_set = d3.map();
				
			let neighborhoods = [];
			
			let color_range = [];
			
			var colorScale;
			
			const g = {
			  basemap: svg.select("g#basemap"),
			  streets: svg.select("g#streets"),
			  outline: svg.select("g#outline"),
			  cases: svg.select("g#cases"),
			  tooltip: svg.select("g#tooltip"),
			  details: svg.select("g#details"),
			  legend: svg.select("g#legend")
			};
			
			// setup tooltip (shows neighborhood name)
			const tip = g
			.tooltip
			.append("foreignObject")
			.attr("class", "neighborhood-tooltip");
			
			tip.attr("text-anchor", "end");
			tip.attr("dx", -5);
			tip.attr("dy", -5);
			tip.attr("width", 200);
			tip.attr("height", 60);
			tip.style("visibility", "hidden");

			// add details widget
			// https://bl.ocks.org/mbostock/1424037
			const details = g.details
				.append("foreignObject")
				.attr("id", "details")
			  	.attr("width", width)
			  	.attr("height", height)
			  	.attr("x", 0)
			  	.attr("y", 0);

			const body = details.append("xhtml:body")
			  .style("text-align", "left")
			  .style("background", "none")
			  .html("<p>N/A</p>");

			details.style("visibility", "hidden");

			// setup projection
			// https://github.com/d3/d3-geo#geoConicEqualArea
			const projection = d3.geoConicEqualArea();
			projection.parallels([37.692514, 37.840699]);
			projection.rotate([122, 0]);

			// setup path generator (note it is a GEO path, not a normal path)
			const path = d3.geoPath().projection(projection);

			d3.json(urls.basemap).then(function(json) {
				// makes sure to adjust projection to fit all of our regions
				projection.fitSize([width, height], json);
			
				d3.json(urls.streets).then(drawStreets);
				
				d3.json(urls.cases).then(function(json) {
					fillNeighborhood(json);
					d3.json(urls.basemap).then(drawBasemap);
					// draw the land and neighborhood outlines
					drawCases(json);
					drawLegend();
				});

				// now that projection has been set trigger loading the other files
				// note that the actual order these files are loaded may differ
			});

			function drawBasemap(json) {
			  console.log("basemap", json);
			
			  const basemap = g.basemap.selectAll("path.land")
				.data(json.features)
				.enter()
				.append("path")
				.attr("d", path)
				.attr("class", "land")
    			.attr("transform", "translate(0," + 100 + ")")
			    .attr("fill", function(d) {
				  if (neighborhoods_set.get(d.properties.name)) {
					  d.number = neighborhoods_set.get(d.properties.name).number;
				  } else {
					  d.number = 0;
				  }
				  return colorScale(d.number);
			    });

//			  console.table(neighborhoods_set);
				
			  const outline = g.outline.selectAll("path.neighborhood")
				  .data(json.features)
				  .enter()
				  .append("path")
				  .attr("d", path)
				  .attr("class", "neighborhood")
    			  .attr("transform", "translate(0," + 100 + ")")
				  .each(function(d) {
					// save selection in data for interactivity
					// saves search time finding the right outline later
					d.properties.outline = this;
				  });

			  // add highlight
			  basemap.on("mouseover.highlight", function(d) {
				d3.select(d.properties.outline).raise();
				d3.select(d.properties.outline).classed("active", true);
			  })
			  .on("mouseout.highlight", function(d) {
				d3.select(d.properties.outline).classed("active", false);
			  });

			  // add tooltip
			  basemap.on("mouseover.tooltip", function(d) {
				let html = d.properties.name;
					html += "<br># of cases: " + d.number;
				  
				tip.html(html);
				tip.style("visibility", "visible");
			  })
			  .on("mousemove.tooltip", function(d) {
				const coords = d3.mouse(g.basemap.node());
				tip.attr("x", coords[0] - 100);
				tip.attr("y", coords[1] - 65);
			  })
			  .on("mouseout.tooltip", function(d) {
				tip.style("visibility", "hidden");
			  });
			}
			
			// initialize a neighborhood list and store its case number
			function fillNeighborhood(json) {
				json.forEach(function(neighborhood) {
					let name = neighborhood.neighborhoods_sffind_boundaries;
					if (neighborhoods_set.has(name)) {
						neighborhoods_set.get(name).number += 1;
					} else {
						neighborhoods_set.set(name, {name: name, number: 1});
					}
				});
				
				neighborhoods_set.each(function(e) {
					neighborhoods.push([e.name, e.number]);
				});
				
				color_max = d3.max(neighborhoods.map(function(d) {
					return d[1];
				}));
				
				color_max = Math.ceil(color_max/100)*100;
				
				for (let i = 1; i < 6; i++) {
					color_range.push(i * color_max/5);
				}
				
				colorScale = d3.scaleThreshold()
				.domain(color_range)
		  		.range(["#fff1de", "#fdd5a4", "#f88457", "#e55037", "#8e0000"]);
			}
			
			function drawStreets(json) {
			  console.log("streets", json);

			  // only show active streets
			  const streets = json.features.filter(function(d) {
				return d.properties.active;
			  });

			  console.log("removed", json.features.length - streets.length, "inactive streets");

			  g.streets.selectAll("path.street")
				.data(streets)
				.enter()
				.append("path")
				.attr("d", path)
    			.attr("transform", "translate(0," + 100 + ")")
				.attr("class", "street");
			}
						
			function drawCases(json) {
			  console.log("cases", json);

			  // loop through and add projected (x, y) coordinates
			  // (just makes our d3 code a bit more simple later)
			  json.forEach(function(d) {
				const latitude = parseFloat(d.lat);
				const longitude = parseFloat(d.long);
				const pixels = projection([longitude, latitude]);

				d.x = pixels[0];
				d.y = pixels[1];
			  });

			  const symbols = g.cases.selectAll("circle")
				.data(json)
				.enter()
				.append("circle")
				.attr("cx", d => d.x)
				.attr("cy", d => d.y)
				.attr("r", 5)
			  	.style("stroke", 1)
				.attr("class", "symbol")
    			.attr("transform", "translate(0," + 100 + ")")
				.attr("fill", function(d) {
				  if (d.status_description != "Closed") {
					return "red";
				  }
				  return;
				});
				
			  symbols.on("mouseover", function(d) {
				d3.select(this).raise();
				d3.select(this).classed("active", true);

				// use template literal for the detail table
				// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals
			  	let formatDate = d3.timeFormat("%B %d, %Y");
				  
				const html = `
				  <table class="info-table" border="0" cellspacing="0" cellpadding="2">
				  <tbody>
					<tr>
					  <th>Service Name:</th>
					  <td>${d.service_name}</td>
					</tr>
					<tr>
					  <th>Date:</th>
					  <td>${formatDate(new Date(d.requested_datetime))}</td>
					</tr>
					<tr>
					  <th>Neighborhood:</th>
					  <td>${d.neighborhoods_sffind_boundaries}</td>
					</tr>
					<tr>
					  <th>Vehicle Details:</th>
					  <td>${d.service_details}</td>
					</tr>
					<tr>
					  <th>Status:</th>
					  <td>${d.status_description}</td>
					</tr>
					<tr>
					  <th>Description:</th>
					  <td>${d.status_notes}</td>
					</tr>
				  </tbody>
				  </table>
				`;

				body.html(html);
				details.style("visibility", "visible");
			  });

			  symbols.on("mouseout", function(d) {
				d3.select(this).classed("active", false);
				details.style("visibility", "hidden");
			  });
			}

			function drawLegend() {
				let legend_height = 20;
				let legend_width = 40;
				
			  	const legend = g.legend
				    .attr("x", 0)
				    .attr("y", 0);
				
				let background = legend
					.append("rect")
					.attr("width", 300)
					.attr("height", 90)
					.attr("x", 645)
					.attr("y", 0)
					.style("fill", "#fff");
				
				// Add one dot in the legend for each name.
				let legend_title = legend
					.append("text")
				   	.attr("transform", "translate(100,0)")
				   	.text("Total Cases")
					.attr("x", 650)
					.attr("y", 30)
					.style("fill", "#000")
				   	.attr("class", "legend-title");

//				console.log(colorScale);
				let legend_rect = legend.selectAll("legend-rects")
					.data(colorScale.range())
					.enter()
					.append("rect")
					.attr("x", function(d,i){ return 690 + i * legend_width })
					.attr("y", 50)
					.attr("width", legend_width)
					.attr("height", legend_height)
					.attr("class", "legend-rect")
					.style("fill", function(d) {
						return d;
					});

				// Legend labels
				legend
				.append("text")
				.attr("x", 675)
				.attr("y", 45)
				.text("0")
				.attr("text-anchor", "left")
				.style("alignment-baseline", "middle")
				.attr("class", "legend-label")
				.style("fill", "#000");

				legend
				.append("text")
				.attr("x", 895)
				.attr("y", 45)
				.text("100")
				.attr("text-anchor", "left")
				.style("alignment-baseline", "middle")
				.attr("class", "legend-label")
				.style("fill", "#000");
			}
			
			// Zooming for the bars
			const extent = [0, [width, height]];

			svg.call(d3.zoom()
			.scaleExtent([1, 4])
			.extent([[0, 0], [width, height]])
			.on("zoom", zoomed));

			function zoomed() {
				g.basemap.selectAll("path.land").attr('transform', d3.event.transform);
				g.outline.selectAll("path.neighborhood").attr('transform', d3.event.transform);
			  	g.streets.selectAll("path.street").attr('transform', d3.event.transform);
				g.cases.selectAll("circle")
					.attr('transform', d3.event.transform)
					.attr("r", 5/d3.event.transform.k)
					.style("stroke-width", 1/d3.event.transform.k);
			}
		</script>
		<script src="../../ui/vendor/jquery.min.js"></script>
		<script src="../../ui/vendor/popper.min.js"></script>
		<script src="../../ui/vendor/bootstrap.min.js"></script>
		<script src="../../ui/vendor/perfect-scrollbar.min.js"></script>
		<script src="../../ui/vendor/hammer.min.js"></script>
		<script src="../../ui/vendor/jquery-ui/jquery-ui.min.js"></script>
		<script src="../../ui/vendor/color/color.min.js"></script>
		<script src="../../ui/vendor/fontawesome.min.js"></script>
		<script src="../../ui/scripts/sidebar.min.js"></script>
		<script src="../../ui/scripts/collapsible-nav.min.js"></script>
		<script src="../../ui/scripts/colors.min.js"></script>
		<script src="../../ui/scripts/settings.min.js"></script>
		<script src="../../ui/scripts/card.min.js"></script>
		<script src="../../ui/scripts/script.js"></script>
	</body>
</html>
